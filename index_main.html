<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!--
  Customize this policy to fit your own app's needs. For more guidance, see:
      https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
  Some notes:
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
      * Enable inline JS: add 'unsafe-inline' to default-src
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">

  <meta name="theme-ios" content="#007aff">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <title>Personal Assistant</title>
  
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">
  <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
  
  <link rel="stylesheet" href="framework7/framework7-bundle.css">
  <link rel="stylesheet" href="css/icons.css">
  <link rel="stylesheet" href="css/app.css">

  <style>
    .hidden {
      display: none!important;
    }

    .btn-cmd {
      text-transform: none!important;
    }

    .img_btn {
      width: 20px;
      height: 20px;
    }

    div.acc_item {display:flex; flex-direction:row; align-items: center;}
    span.acc_item {padding-left:10px}
    img.acc_item {width:48px; height:48px}

    .topic_item {
      width: 250px;
      display: block;
      overflow: hidden;
    }

    .topic_icon {
      font-size: 20px;
      margin-left: 4px;
    }

    .topic_title {
      display: flex;
    }

    .ftune_title {
      display: flex;
    }

    .ftune_item {
      color: var(--f7-text-color);
    }


    .cur_topic {
      background-color:coral;
    }

    :root {
      color-schema: light dark;
      --f7-label-font-size: 15px;
      --f7-panel-left-width: 340px;
      --f7-list-item-title-font-size: 14px;
      --f7-popover-width: 300px;
    }

    div.code_header {
      background: darkgrey;
      border-radius: 5px;
      height: 25px;
      display: flex;
      flex-direction: row-reverse;
      padding: 3px 3px;
    }

    .code_header button{
      display: flex;
      align-items: center;
      width: 110px;
    }
    .code_header img.img20{
      width: 20px;
      height:  20px;
      padding-right: 5px;
    }

    div.chat_code {
      background: darkgrey;
      border-radius: 5px;
      display: flex;
      flex-direction: column;
    }

    div.code_block {
      width: calc(100% - 10px);
      padding-left: 5px;
      padding-bottom: 5px;
    }

    span#s_req {
      border: var(--f7-list-button-border-color);
      border-style: solid;
      border-radius: 5px;
      overflow-x: auto;
      overflow-y: auto;
      max-height: calc(40vh);
      overflow-wrap: inherit;
    }

    .textarea {
      display: block;
      width: 100%;
      min-height: 30px;
      line-height: 20px;
      font-family: inherit;
      font-size: inherit;
      padding: 1px 6px;
    }

    .mtoolbar {
      display: flex;
      z-index: 9999;
      height: fit-content;
      min-height: 20px;
      margin-bottom: 0px;
      padding-top: 10px;
    }

    .audio-btn {
      float:right;
      margin-right:5px;
      padding-left: 5px;
      padding-right: 10px;
    }

    .blink_btn {
      animation: blinker 1s linear infinite;
    }

    @keyframes blinker {
      50% {
        opacity: 0;
    }
}

  </style>
</head>
<body>
  <div id="app">
    <!--  Left panel -->
    <div class="panel panel-left panel-cover panel-resizable panel-init" id="left_panel">
      <div class="page">
        <div class="page-content">
          <div style="display:flex; flex-direction:row-reverse;">
            <a href="#" class="panel-close">
              <i class="icon f7-icons">multiply_circle</i>
            </a>
            &nbsp;&nbsp;&nbsp;
          </div>
          
          <div class="block" style="margin-bottom: 10px; margin-top: 0px;">
            <form class="searchbar" style="margin-bottom: 5px;">
              <div class="searchbar-inner">
                <div class="searchbar-input-wrap">
                  <input type="search" placeholder="Search" />
                  <i class="searchbar-icon"></i>
                  <span class="input-clear-button"></span>
                </div>
                <span class="searchbar-disable-button">Cancel</span>
              </div>
            </form>
            <button id="btn-new" class="button button-large button-outline" style="text-transform: inherit;justify-content: left;">
              <i class="icon f7-icons">plus</i>
              &nbsp;&nbsp;New chat
            </button>
          </div>

          <!-- Chat List -->
          <div class="list list-strong-ios list-outline-ios list-dividers-ios simple-list searchbar-not-found">
            <ul>
              <li>Nothing found</li>
            </ul>
          </div>
          <div id="list_topics" class="list list-strong list-outline-ios list-dividers search-list searchbar-found inset-md" style="height:80%; overflow-y:scroll; margin-top: 10px;">
            <ul>
            </ul>
          </div>

        </div>
      </div>
    </div>
    
    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main view-init safe-areas" data-master-detail-breakpoint="768">
      <div class="page" data-name="home">
        <!------- navbar ------------------>
        <div class="navbar no-outline">
          <div class="navbar-bg"></div>
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link icon-only" id="panel-menu">
                <i class="icon f7-icons if-not-md">menu</i>
                <i class="icon material-icons md-only">menu</i>
              </a>
            </div>

            <div class="title">Personal Assistant
              <span class="subtitle" id="subtitle">gpt-4</span>
            </div>
            <div class="right">

              <a id="api-lock" href="#" class="link hidden">
                <i class="icon f7-icons">lock</i>
              </a>

              <a id="login" href="#" class="link" style="padding-right: 10px;">
                    <i class="icon f7-icons">square_arrow_right</i>
              </a>
              <a id="uid_menu" href="#" class="link popover-open hidden" style="padding-right: 10px;" data-popover=".popover-user"> 
                <i class="icon f7-icons">person_fill</i>
              </a>
            </div>

            <!-- Subnavbar -->
            <div class="subnavbar">
              <div class="subnavbar-inner">
                <!-- Subnavbar content, for example tabs buttons -->
                <div class="left">
                  <a id="reload" href="#" class="link" style="padding-left: 10px;" >
                    <i class="icon f7-icons">arrow_clockwise</i> 
                  </a>
                  <a id="settings" href="#" class="link popover-open" style="padding-left: 5px;" data-popover=".popover-settings"> 
                    <i class="icon f7-icons">gear</i> 
                  </a>
                  <a href="#" class="link popover-open" style="padding-left: 5px;" data-popover=".popover-funcs">
                    <i class="icon f7-icons">f_cursive<span id="func_badge" class="badge color-red hidden">1</span></i>
                  </a>
                  <a href="#" class="link popover-open" style="padding-left: 5px;" data-popover=".popover-ftune">
                    <i class="icon f7-icons">book_fill</i>
                  </a>
                  <a id="share" href="#" class="link" style="padding-left: 10px;"> 
                    <i class="icon f7-icons">square_arrow_up</i> 
                  </a>
                </div>          
              </div>
            </div>

          </div>
        </div>
        <!-----end navbar -------------------->

        <!-- bottom toolbar for req -->
        <div class="toolbar toolbar-bottom mtoolbar block block-strong">
          <a id="audio-start" href="#" class="link audio-btn hidden" > <i class="icon f7-icons">mic_fill</i> </a>
          <a id="audio-stop" href="#" class="link audio-btn hidden blink_btn" > <i class="icon f7-icons">mic_slash_fill</i> </a>
          <span id="s_req" class="textarea" role="textbox" contenteditable></span>
          <a id="btn-send" href="#" class="link" style="padding-left: 10px;"> <i class="icon f7-icons">paperplane_fill</i> </a>
        </div>
        <!-- toolbar bottom -->
        <div class="fab fab-extended fab-left-bottom color-blue hidden" id="fab-continue">
          <a>
            <i class="icon f7-icons">arrowtriangle_right_fill</i>
            <div class="fab-text">Continue</div>
          </a>
        </div>

        <div class="fab fab-extended fab-right-bottom color-blue hidden" id="fab-stop">
          <a>
            <i class="icon f7-icons">stop_fill</i>
            <div class="fab-text">Stop</div>
          </a>
        </div>


        <!-- Scrollable page content-->
        <div class="page-content hide-toolbar-on-scroll" id="main" >

          <div id="conversation"> </div>

          <div class="block-title">&nbsp;&nbsp;</div>

        </div>
<!-- ========================================================================================= -->
      </div>

      <div id ="popover-settings" class="popover popover-settings">
        <div class="popover-angle"></div>
        <div class="popover-inner">

          <div class="list list-strong-ios list-dividers-ios list-outline-ios" id="my-form">
            <ul>
              <li id="l_model">
                <a id="ss_model" class="item-link smart-select smart-select-init" data-open-in="popover">
                  <select name="ss_model" id="c_model" placeholder="Please choose...">
                    <option value="gpt-4" selected>GPT-4</option>
                    <option value="gpt-4-0613" >GPT-4-0613</option>
                    <option value="gpt-4-0314" >GPT-4-0314</option>
                    <option value="gpt-3.5-turbo" >GPT-3.5-turbo</option>
                    <option value="gpt-3.5-turbo-16k" >GPT-3.5-turbo-16k</option>
                    <option value="gpt-3.5-turbo-16k-0613" >GPT-3.5-turbo-16k-0613</option>
                    <option value="gpt-3.5-turbo-0613" >GPT-3.5-turbo-0613</option>
                    <option value="gpt-3.5-turbo-0301" >GPT-3.5-turbo-0301</option>
                  </select>
                  <div class="item-content">
                    <div id="ss_model_item" class="item-inner">
                      <div class="item-title">Model</div>
                    </div>
                  </div>
                </a>
              </li>

              <li>
                <div class="item-content" style="flex-flow:column">
                  <div class="item-inner" style="flex-flow: column;align-items: flex-start;">
                    <div style="width: 100%;display:flex;">
                      <div class="item-title" style="margin: auto; margin-left: 0px;">temperature</div>
                      <div class="item-after">
                        <input id="v_temp" type="number" min="0" max="2" step="0.01" value="0.2" />
                      </div>
                    </div>
                    <div id="range_temp" class="range-slider" data-label="false">
                      <input type="range" min="0" max="2" step="0.01" value="0.2" />
                    </div>
                </div>
              </li>              

              <li>
                <div class="item-content" style="flex-flow:column">
                  <div class="item-inner" style="flex-flow: column;align-items: flex-start;">
                    <div style="width: 100%;display:flex; ">
                      <div class="item-title" style="margin: auto; margin-left: 0px;">top_p</div>
                      <div class="item-after">
                        <input id="v_topp" type="number" min="0" max="1" step="0.01" value="0.5" />
                      </div>
                    </div>
                    <div id="range_topp" class="range-slider" data-label="false">
                      <input type="range" min="0" max="1" step="0.01" value="0.5"/>
                    </div>
              </div>
              </li>              

              <li class="item-content">
                <div class="item-inner">
                  <div class="item-title">Enable audio input</div>
                  <div class="item-after">
                    <label class="toggle" >
                      <input type="checkbox" id="enable_audio"/>
                      <span class="toggle-icon"></span>
                    </label>
                  </div>
                </div>
              </li>

              <li class="item-content">
                <div class="item-inner">
                  <div class="item-title">Use chat content for search</div>
                  <div class="item-after">
                    <label class="toggle" >
                      <input type="checkbox" id="enable_srv_search"/>
                      <span class="toggle-icon"></span>
                    </label>
                  </div>
                </div>
              </li>
            
            </ul>
          </div>
          <div class="block" style="overflow-wrap: anywhere;">
          </div>
        </div>
      </div>


      <div class="popover popover-user">
        <div class="popover-angle"></div>
        <div class="popover-inner">
          <div class="block-title">NetId</div>
          <div class="block" id="netid" style="overflow-wrap: anywhere;">
          </div>
          <div class="block">
            <button id="btn-logout" class="button button-fill button-round" style="text-transform: inherit;">Logout</button>
          </div>
        </div>
      </div>


      <div class="popover popover-funcs">
        <div class="popover-angle"></div>
        <div class="popover-inner">
          <div class="list list-strong-ios list-outline-ios list-dividers-ios">
            <ul id="funcs-list"> </ul>
          </div>
        </div>
      </div>

      <div class="popover popover-ftune" id="popover-ftune">
        <div class="popover-angle"></div>
        <div class="popover-inner">
          <div class="list list-strong-ios list-outline-ios list-dividers-ios">
            <ul id="ftune-list"> </ul>
          </div>
        </div>
      </div>


    </div>
  </div>

  <script type="text/javascript" src="js/lib/solid-client-authn.bundle.js"></script>
  <script type="text/javascript" src="js/lib/markdown-it.js"></script>
  <script type="text/javascript" src="js/lib/highlight/highlight.js"></script>

  <link rel="stylesheet" href="js/lib/highlight/atom-one-dark.css" />
  <link rel="stylesheet" href="js/lib/css/github-markdown.css" />

  <script type="text/javascript" src="js/browser.js"></script>
  <script src="js/utils.js"></script>
  

  
  <!-- Framework7 library -->
  <script src="framework7/framework7-bundle.js"></script>
  
  <!-- App routes -->
  <script src="routes.js"></script>
  <!-- App scripts -->
  <script src="config.js"></script>

  <script src="js/p_chat_main.js"></script>
  <script src="js/chat.js"></script>
  <script src="p_app_main.js"></script>


<script>
</script>


</body>
</html>
